!function(){"use strict";const e=new class{save(e){localStorage.setItem("tasks",JSON.stringify(e))}load(){return localStorage.getItem("tasks")}},t=new class{constructor(){this.toDoTasks=document.querySelector("#todo .column-tasks"),this.inProgressTasks=document.querySelector("#in-progress .column-tasks"),this.doneTasks=document.querySelector("#done .column-tasks")}addNewTask(e,t){if(""!==t){const s=document.createElement("div");s.className="item-task",s.innerHTML=`\n        ${t}\n        <div class="delete-task hidden"></div>\n      `,e.appendChild(s)}}addTasks(e,t){for(let s=0;s<t.length;s+=1)this.addNewTask(e,t[s])}initTasks(e){this.addTasks(this.toDoTasks,e.todo),this.addTasks(this.inProgressTasks,e.inProgress),this.addTasks(this.doneTasks,e.done)}},s=document.querySelector("#tasks");let n,o,a,l,d=null,r=null;function i(e,t){const s=document.elementFromPoint(e.clientX,e.clientY),{top:n}=s.getBoundingClientRect();s.classList.contains("item-task")?e.pageY>window.scrollY+n+s.offsetHeight/2?s.closest(".column-tasks").insertBefore(t,s.nextElementSibling):s.closest(".column-tasks").insertBefore(t,s):s.classList.contains("column-tasks")&&!s.querySelector(".item-task")&&s.append(t)}function c(){const t=document.querySelectorAll("#todo .column-tasks .item-task"),s=document.querySelectorAll("#in-progress .column-tasks .item-task"),n=document.querySelectorAll("#done .column-tasks .item-task"),o={todo:[],inProgress:[],done:[]};for(const e of t)o.todo.push(e.textContent);for(const e of s)o.inProgress.push(e.textContent);for(const e of n)o.done.push(e.textContent);e.save(o)}document.addEventListener("DOMContentLoaded",(()=>{const s=JSON.parse(e.load());null!==s?t.initTasks(s):t.initTasks({todo:["Pay rent","Buy a new knife"],inProgress:["Netology homework"],done:["BHJ Diploma","Check email"]})})),s.addEventListener("mousedown",(e=>{if(e.target.classList.contains("add-task"))e.target.parentNode.querySelector(".input-task").classList.remove("hidden"),e.target.classList.add("hidden");else if(e.target.classList.contains("cancel-task-hidden"))e.target.closest(".column").querySelector(".add-task").classList.remove("hidden"),e.target.parentNode.classList.add("hidden");else if(e.target.classList.contains("add-task-hidden")){const s=e.target.closest(".column").querySelector(".column-tasks"),n=e.target.closest(".input-task").querySelector("#text-task");t.addNewTask(s,n.value),n.value="",e.target.closest(".column").querySelector(".add-task").classList.remove("hidden"),e.target.parentNode.classList.add("hidden"),c()}else if(e.target.classList.contains("delete-task")){const t=e.target.parentNode;t.parentNode.removeChild(t),c()}else if(e.target.classList.contains("item-task")){e.preventDefault(),e.target.querySelector(".delete-task").classList.add("hidden");const{top:t,left:s}=e.target.getBoundingClientRect();d=e.target,n=d.offsetWidth,o=d.offsetHeight,l=e.pageX-s,a=e.pageY-t,r=e.target.cloneNode(!0),r.innerHTML="",r.style.backgroundColor="darkgray",r.style.width=`${n}px`,r.style.height=`${o}px`,d.classList.add("dragged"),e.target.parentNode.insertBefore(r,e.target.nextElementSibling),d.style.left=e.pageX-l+"px",d.style.top=e.pageY-a+"px",d.style.width=`${n}px`,d.style.height=`${o}px`}})),s.addEventListener("mouseleave",(e=>{d&&(e.preventDefault(),r.parentNode.removeChild(r),d.classList.remove("dragged"),d.style="",r=null,d=null)})),s.addEventListener("mousemove",(e=>{d&&(e.preventDefault(),i(e,r),d.style.left=e.pageX-l+"px",d.style.top=e.pageY-a+"px")})),s.addEventListener("mouseup",(e=>{d&&(i(e,d),r.parentNode.removeChild(r),d.classList.remove("dragged"),d.style="",r=null,d=null,c())}))}();